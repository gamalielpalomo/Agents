package parser;
import java_cup.runtime.*;
import java.io.FileReader;
import Agenda.Event;
import Agent.Instruction;

parser code{:
    public static void main(String args[])
    {
        try
        {
            SyntacticAnalyzer sa = new SyntacticAnalyzer(new LexicalAnalyzer(new FileReader(args[0])));
            Object result = sa.parse().value;
            System.out.println("Executed!");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
:}

action code{:
    Event event;
    Instruction instruction;
:}

terminal SEMI, SCHEDULE, SLASH, DOUBLE, REMOVE, CHANGE, AT, FROM, TO, SPACE, GEN;
terminal int INT;
terminal String WORK, MEDICAL, PERSONAL, WITH, MEETING, STR;
non terminal Object create, nothing, todo, agend, schedule1, schedule2;
non terminal String reason;

todo ::= create|agend;
agend ::= schedule1|schedule2;
reason ::= WORK|MEDICAL|PERSONAL;

schedule1 ::= 
SCHEDULE WORK:description AT INT:month SLASH INT:day SLASH INT:year INT:hour DOUBLE INT:minutes 
{:
    System.out.format("\n%s date scheduled today at %d:%d on %d-%d-%d\n",description,hour,minutes,month,day,year);
    event = new Event(hour,day,description);
    instruction = new Instruction(Instruction.Command.SCHEDULE,event);
:}
|
SCHEDULE PERSONAL:description AT INT:month SLASH INT:day SLASH INT:year INT:hour DOUBLE INT:minutes 
{:
    System.out.format("\n%s date scheduled today at %d:%d on %d-%d-%d\n",description,hour,minutes,month,day,year);
    event = new Event(hour,day,description);
    instruction = new Instruction(Instruction.Command.SCHEDULE,event);
:}
|
SCHEDULE MEDICAL:description AT INT:month SLASH INT:day SLASH INT:year INT:hour DOUBLE INT:minutes 
{:
    System.out.format("\n%s date scheduled today at %d:%d on %d-%d-%d\n",description,hour,minutes,month,day,year);
    event = new Event(hour,day,description);
    instruction = new Instruction(Instruction.Command.SCHEDULE,event);
:};

schedule2 ::= SCHEDULE MEETING WITH STR:companion AT INT:month SLASH INT:day SLASH INT:year INT:hour DOUBLE INT:minutes 
{:
    System.out.format("\nMeeting with %s date scheduled today at %d:%d on %d-%d-%d\n",companion,hour,minutes,month,day,year);
    event = new Event(hour, day, "meeting", companion);
    instruction = new Instruction(Instruction.Command.SCHEDULE,event);
:};